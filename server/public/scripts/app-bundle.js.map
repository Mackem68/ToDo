{"version":3,"sources":["src/app.js","src/auth-config.js","src/environment.js","src/main.js","src/modules/home.js","src/modules/list.js","src/resources/index.js","src/resources/data/data-services.js","src/resources/data/todos.js","src/resources/data/users.js","src/resources/elements/flatpickr.js","src/resources/value-converters/completed.js","src/resources/value-converters/date-format.js"],"names":["App","configureRouter","config","router","addPipelineStep","map","route","moduleId","name","auth","authConfig","baseUrl","loginUrl","tokenName","authHeader","authToken","logoutRedirect","debug","testing","configure","window","regeneratorRuntime","aurelia","use","standardConfiguration","plugin","baseConfig","feature","developmentLogging","start","then","setRoot","Home","users","message","showLogin","loginError","showRegister","user","firstName","lastName","email","password","registerError","save","serverResponse","error","login","sessionStorage","setItem","JSON","stringify","response","navigate","catch","console","log","List","todos","parse","getItem","showList","priorities","showCompleted","activate","getUserTodos","_id","createTodo","todoObj","todo","description","dateDue","Date","priority","editTodo","saveTodo","alert","todoId","filesToUpload","length","uploadFile","deleteTodo","completeTodo","completed","toggleShowCompleted","changeFiles","Array","push","files","removeFile","index","splice","logout","removeItem","globalResources","DataServices","http","httpClient","BASE_URL","withBaseUrl","withDefaults","credentials","headers","withInterceptor","request","localStorage","append","method","url","status","get","fetch","json","data","post","content","body","object","put","delete","uploadFiles","ToDos","TODOS_SERVICE","todosArray","id","userId","formData","FormData","forEach","item","i","Users","USER_SERVICE","FlatPickerCustomElement","Element","defaultBindingMode","twoWay","element","bind","defaultConfig","altInput","altFormat","wrap","_config","Object","assign","onChange","onMonthChange","onYearChange","attached","flatpickr","querySelector","selectedDates","dateStr","instance","value","valueChanged","newDate","undefined","setDate","CompletedValueConverter","toView","array","filter","DateFormatValueConverter","format"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {inject} from 'aurelia-framework';\nimport {AuthorizeStep} from 'aurelia-auth';\n\n\n\nexport class App {\n  configureRouter(config, router) {\n    this.router = router;\n    config.addPipelineStep('authorize', AuthorizeStep);\n    config.map([\n      { \n\t        route: ['', 'home'],\n\t        moduleId: './modules/home',\n\t        name: 'Home' \n      },\n      {\n\t        route: 'list',\n\t        moduleId: './modules/list',\n          name: 'List',\n          auth: true\n     }\n    ]);\n  }\n}","var authConfig = {\r\n    baseUrl: \"http://localhost:5000/api\",\r\n    loginUrl: '/users/login',\r\n    tokenName: 'token',\r\n    authHeader: 'Authorization',\r\n    authToken: '',\r\n    logoutRedirect: '#/home'\r\n  }\r\n  \r\n  export default authConfig;\r\n  ","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport config from './auth-config';\nimport regeneratorRuntime from 'regenerator-runtime';\nwindow.regeneratorRuntime = regeneratorRuntime;\n\n\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .plugin('aurelia-auth', (baseConfig)=>{\n      baseConfig.configure(config);\n })\n\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject} from 'aurelia-framework';\r\nimport {Router} from 'aurelia-router';\r\nimport { Users } from '../resources/data/users';\r\nimport {AuthService} from 'aurelia-auth';\r\n\r\n\r\n@inject(Router, Users, AuthService)\r\nexport class Home {\r\n  constructor(router, users, auth) {\r\n    this.router = router;\r\n    this.users = users;\r\n    this.message = 'Home';\r\n    this.showLogin = true;\r\n    this.auth = auth;\r\n    this.loginError = '';\r\n\r\n  }\r\n\r\n  showRegister(){\r\n    this.user = {\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        email: \"\",\r\n        password: \"\"\r\n        }\r\n    this.registerError = \"\";       \r\n\tthis.showLogin = false;\r\n}\r\n\r\n    async save() {\r\n          let serverResponse = await this.users.save(this.user);\r\n          if (!serverResponse.error) {\r\n            this.showLogin = true;\r\n          } else {\r\n            this.registerError = \"There was a problem registering the user.\"\r\n          }\r\n    }\r\n    \r\n    login() {\r\n      return this.auth.login(this.email, this.password)\r\n        .then(response => {\r\n          sessionStorage.setItem(\"user\", JSON.stringify(response.user));\r\n          this.loginError = \"\";\r\n          this.router.navigate('list');\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n          this.loginError = \"Invalid credentials.\";\r\n        });\r\n    };\r\n  \r\n}","import {inject} from 'aurelia-framework';\r\nimport {Router} from 'aurelia-router';\r\nimport {AuthService} from 'aurelia-auth';\r\nimport {ToDos} from '../resources/data/todos';\r\n\r\n\r\n@inject(ToDos, AuthService)\r\nexport class List {\r\n  constructor(todos, auth) {\r\n\tthis.todos = todos;\r\n         this.message = 'List';\r\n         this.auth = auth;\r\n         this.loginError = '';\r\n         this.user = JSON.parse(sessionStorage.getItem('user'));\r\n         this.showList = true;\r\n\t\t this.priorities=['Low', 'Medium', 'High', 'Critical']\r\n\t\t this.showCompleted = false;\r\n\t\t \r\n      \r\n  }\r\n  async activate(){\r\n\t\tawait this.todos.getUserTodos(this.user._id);\r\n\t}\r\n\r\n  createTodo(){\t\r\n\t\tthis.todoObj = {\r\n\t\t\ttodo: \"\",\r\n\t\t\tdescription: \"\",\r\n\t\t\tdateDue: new Date(),\r\n\t\t\tuser: this.user._id,\r\n\t\t\tpriority: this.priorities[0]\r\n\t\t}\r\n\t\tthis.showList = false;\t\t\r\n  \t}\r\n\r\n    editTodo(todo){\r\n\t\tthis.todoObj = todo;\r\n\t\tthis. showList = false;\r\n\t}\r\n\t\r\n  \r\n  async saveTodo(){\r\n\t\tif(this.todoObj){\t\t\r\n\t\t\tlet response = await this.todos.save(this.todoObj);\r\n\t\t\tif(response.error){\r\n\t\t\t\talert(\"There was an error creating the ToDo\");\r\n\t\t\t} else {\r\n\t\t\t\tvar todoId = response._id;\r\n\t                if(this.filesToUpload && this.filesToUpload.length){\r\n\t                    await this.todos.uploadFile(this.filesToUpload, this.user._id, todoId);\r\n\t                    this.filesToUpload = [];\r\n\t                }\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\tthis.showList = true;\r\n\t\t}\r\n\t}\r\n\r\n    deleteTodo(todo){\r\n\t\tthis.todos.deleteTodo(todo._id);\r\n\t}\r\n\r\n\t\r\n\tcompleteTodo(todo){\r\n\t\t    todo.completed = !todo.completed;\r\n\t\t    this.todoObj = todo;\r\n\t\t    this.saveTodo();\r\n\t}\r\n\t\r\n\ttoggleShowCompleted(){\r\n\t\t    this.showCompleted = !this.showCompleted;\r\n\t\t}\r\n\t\r\n\tchangeFiles(){\r\n\t\t    this.filesToUpload = new Array(); \r\n\t\t    this.filesToUpload.push(this.files[0]);\r\n\t}\r\n\tremoveFile(index){\r\n\t    this.filesToUpload.splice(index,1);\r\n\t}\r\n\t\t\t\t\t\r\n\r\n  logout(){\r\n    sessionStorage.removeItem('user');\r\n    this.auth.logout();\r\n}\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* import {inject} from 'aurelia-framework';\r\nimport {ToDos} from '../resources/data/todos';\r\nimport { AuthService } from 'aurelia-auth';\r\n\r\n\r\n@inject(ToDos, AuthService)\r\nexport class List {\r\n\r\n  constructor(todos,auth){\r\n      this.todos=todos;\r\n      this.auth = auth;\r\n      \r\n      this.user = JSON.parse(sessionStorage.getItem('user'));\r\n      this.title = \"Jacob has things ToDo!\"\r\n      this. showList = true;\r\n      this.showCompleted=false;\r\n      this.priorities = ['Low', 'Medium', 'High', 'Critical'];\r\n      }\r\n      async activate(){\r\n        await this.todos.getUserTodos(this.user._id);\r\n      }\r\n    \r\n  createTodo(){\t\r\n\t\tthis.todoObj = {\r\n\t\t\ttodo: \"\",\r\n\t\t\tdescription: \"\",\r\n\t\t\tdateDue: new Date(),\r\n\t\t\t userId: this.user._id,\r\n\t\t\tpriority: this.priorities[0]\r\n\t\t}\r\n\t\tthis.showList = false;\t\t\r\n\t}\r\n\r\n\r\neditTodo(todo){\r\n          this.todoObj = todo;\r\n          this. showList = false;\r\n      }\r\n  \r\nasync saveTodo(){\r\n  if(this.todoObj){\t\t\r\n    let response = await this.todos.save(this.todoObj);\r\n    if(response.error){\r\n      alert(\"There was an error creating the ToDo\");\r\n    } else {\r\n      var todoId = response._id;\r\n                      if(this.filesToUpload && this.filesToUpload.length){\r\n                          await this.todos.uploadFile(this.filesToUpload, this.user._id, todoId);\r\n                          this.filesToUpload = [];\r\n                      }\r\n                      \r\n    }\r\n    this.showList = true;\r\n  }\r\n}\r\nasync deleteTodo(id){\r\n  let response = await this.data.delete(this.TODOS_SERVICE + \"/\" + id);\r\n  if(!response.error){\r\n    for(let i = 0; i < this.todosArray.length; i++){\r\n      if(this.todosArray[i]._id === id){\r\n        this.todosArray.splice(i,1);\r\n      }\r\n    }\r\n  }\r\n}\r\ncompleteTodo(todo){\r\n      todo.completed = !todo.completed;\r\n      this.todoObj = todo;\r\n      this.saveTodo();\r\n  }\r\n  toggleShowCompleted(){\r\n        this.showCompleted = !this.showCompleted;\r\n    }\r\n    \r\n   deleteTodo(todo){\r\n            this.todos.deleteTodo(todo._id);\r\n        }\r\n  logout(){\r\n    sessionStorage.removeItem('user');\r\n     this.auth.logout();\r\n  } \r\n  changeFiles(){\r\n        this.filesToUpload = new Array(); \r\n        this.filesToUpload.push(this.files[0]);\r\n    }\r\n    removeFile(index){\r\n        this.filesToUpload.splice(index,1);\r\n    }\r\n    async uploadFile(files, userId, todoId){\r\n              let formData = new FormData();\r\n              files.forEach((item, index) => {\r\n        formData.append(\"file\" + index, item);\r\n              });\r\n          \r\n        let response = await this.data.uploadFiles(formData, this.TODO_SERVICE + \u000b\t\t\"/upload/\" + userId + \"/\" + todoId);\r\n        return response;\r\n      }\r\n      uploadFiles(files, url){\r\n            return this.httpClient\r\n            .fetch(url, {\r\n                method: 'post',\r\n                body: files\r\n            })\r\n            .then(response => response.json())\r\n            .then(object => {\r\n                return object;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            });\r\n        }\r\n        \r\n}\r\n*/\r\n","export function configure(config) {\n  config.globalResources([\n    './value-converters/date-format',\n    './value-converters/completed',\n    './elements/flatpickr'\n  ]);\n}\n","import { inject } from 'aurelia-framework';\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\n\r\n@inject(HttpClient)\r\nexport class DataServices {\r\n\r\n    constructor(http) {\r\n\t\tthis.httpClient = http;\r\n\t\tthis.BASE_URL = \"http://localhost:5000/api/\";\r\n\r\n\t\tthis.httpClient.configure(config => {\r\n\t\tconfig\r\n\t\t\t.withBaseUrl(this.BASE_URL)\r\n\t\t\t.withDefaults({\r\n\t\t\tcredentials: 'same-origin',\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'X-Requested-With': 'Fetch'\r\n\t\t\t}\r\n\t\t\t})\r\n\t\t\t.withInterceptor({\r\n\t\t\trequest(request) {\r\n\t\t\t\tvar authHeader = 'Bearer ' + localStorage.getItem('aurelia_token')\r\n\t\t\t\trequest.headers.append('Authorization', authHeader);\t\t\t\r\n\t\t\t\tconsole.log(`Requesting ${request.method} ${request.url}`);\r\n\t\t\t\treturn request;\r\n\t\t\t},\r\n\t\t\tresponse(response) {\r\n\t\t\t\tconsole.log(`Received ${response.status} ${response.url}`);\r\n\t\t\t\treturn response;\r\n\t\t\t}\r\n\t\t\t});\r\n        });\r\n    }\r\n\r\n    get(url) {\r\n\t\treturn this.httpClient.fetch(url)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\treturn error;\r\n\t\t\t});\r\n    }\r\n\r\n    post(content, url) {\r\n        console.log(content)\r\n        console.log(url)\r\n\t\treturn this.httpClient\r\n\t\t\t.fetch(url, {\r\n\t\t\t\tmethod: 'post',\r\n\t\t\t\tbody: json(content)\r\n\t\t\t})\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(object => {\r\n\t\t\t\treturn object;\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\treturn error;\r\n\t\t\t});\r\n    }\r\n\r\n    put(content, url) {\r\n\t\treturn this.httpClient\r\n\t\t\t.fetch(url, {\r\n\t\t\t\tmethod: 'put',\r\n\t\t\t\tbody: json(content)\r\n\t\t\t})\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(object => {\r\n\t\t\t\treturn object;\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\treturn error;\r\n\t\t\t});\r\n\t}\r\n\r\n    delete(url) {\r\n\t\treturn this.httpClient\r\n\t\t\t.fetch(url, {\r\n\t\t\t\tmethod: 'delete'\r\n\t\t\t})\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(object => {\r\n\t\t\t\treturn object;\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\treturn error ;\r\n\t\t\t});\r\n\t}\r\n\r\n\tuploadFiles(files, url){\r\n\t\t    return this.httpClient\r\n\t\t    .fetch(url, {\r\n\t\t        method: 'post',\r\n\t\t        body: files\r\n\t\t    })\r\n\t\t    .then(response => response.json())\r\n\t\t    .then(object => {\r\n\t\t        return object;\r\n\t\t    })\r\n\t\t    .catch(error => {\r\n\t\t        return error;\r\n\t\t    });\r\n\t\t}\r\n\t\t\r\n}\r\n","import {inject} from 'aurelia-framework';\r\nimport {DataServices} from './data-services';\r\n\r\n\r\n@inject(DataServices)\r\nexport class ToDos {\r\n\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.TODOS_SERVICE = 'todos';\r\n       this.todosArray = [];\r\n}\r\nasync getUserTodos(id){\r\n    let response = await this.data.get(this.TODOS_SERVICE + \"/user/\" + id);\r\n    if(!response.error && !response.message){\r\n        this.todosArray = response;\r\n    }\r\n}\r\n\r\n\r\nasync save(todo){\r\n        if(todo){\r\n            if(!todo._id){\r\n                let response = await this.data.post(todo, this.TODOS_SERVICE);\r\n                if(!response.error){\r\n                    this.todosArray.push(response);\r\n                }\r\n                return response;\r\n            } else {\r\n                let response = await this.data.put(todo, this.TODOS_SERVICE + \"/\" + todo._id);\r\n                if(!response.error){\r\n                    // this.updateArray(response);\r\n                }\r\n                return response;\r\n            }\r\n        }\r\n}\r\nasync uploadFile(files, userId, todoId){\r\n            let formData = new FormData();\r\n            files.forEach((item, index) => {\r\n                formData.append(\"file\" + index, item);\r\n            });\r\n        \r\n        let response = await this.data.uploadFiles(formData, this.TODOS_SERVICE + \"/upload/\" + userId + \"/\" + todoId);\r\n        return response;\r\n    }\r\n    \r\n\r\n    async deleteTodo(id){\r\n\t\tlet response = await this.data.delete(this.TODOS_SERVICE + \"/\" + id);\r\n\t\tif(!response.error){\r\n\t\t\tfor(let i = 0; i < this.todosArray.length; i++){\r\n\t\t\t\tif(this.todosArray[i]._id === id){\r\n\t\t\t\t\tthis.todosArray.splice(i,1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import {inject} from 'aurelia-framework';\r\nimport {DataServices} from './data-services';\r\n\r\n@inject(DataServices)\r\nexport class Users {\r\n\r\nconstructor(data) {\r\n        this.data = data;\r\n\r\n        this.USER_SERVICE = 'users';\r\n    }\r\n\r\nasync save(user){\r\n    if(user){\r\n        try{\r\n            let serverResponse = await this.data.post(user, this.USER_SERVICE);\r\n            return serverResponse;\r\n         } catch (error) {\r\n            console.log(error);\r\n            return error;\r\n        }\r\n    }\r\n}\r\n\r\n}\r\n","import { inject, bindable, bindingMode } from 'aurelia-framework';\r\nimport Flatpickr from 'flatpickr';\r\n\r\n@inject(Element)\r\nexport class FlatPickerCustomElement {\r\n    @bindable({ defaultBindingMode: bindingMode.twoWay }) value;\r\n    constructor(element) {\r\n        this.element = element;\r\n    }\r\n    bind() {\r\n        const defaultConfig = {\r\n            altInput: true,\r\n            altFormat: \"F j, Y\",\r\n            wrap: true\r\n        };\r\n        this._config = Object.assign({}, defaultConfig);\r\n        this._config.onChange = this._config.onMonthChange = this._config.onYearChange = this.onChange.bind(this);\r\n    }\r\n    attached() {\r\n        this.flatpickr = new Flatpickr(this.element.querySelector('.aurelia-flatpickr'), this._config);\r\n    }\r\n    onChange(selectedDates, dateStr, instance) {\r\n        this.value = selectedDates[0]\r\n    }\r\n    valueChanged() {\r\n        if (!this.flatpickr) {\r\n            return;\r\n        }\r\n        if (this.value === this.flatpickr.selectedDates[0]) {\r\n            return;\r\n        }\r\n        let newDate = this.value ? this.value : undefined;\r\n        this.flatpickr.setDate(newDate);\r\n    }\r\n}\r\n","export class CompletedValueConverter {\r\n      \r\n       toView(array, value) {\r\n         if(!value){\r\n          return array.filter(item => {\r\n            return !item.completed;\r\n          })\r\n         } else {\r\n           return array;\r\n         }\r\n       }\r\n      }\r\n    ","import moment from 'moment';\r\n\r\nexport class DateFormatValueConverter {\r\n    toView(value) {\r\n        if(value === undefined || value === null){\r\n\t        return;\r\n    \t}\r\n    \r\n    \treturn moment(value).format('MMM Do YYYY');\r\n\t}\r\n}\r\n"],"sourceRoot":".."}